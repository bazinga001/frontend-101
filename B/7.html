<!DOCTYPE html>
<html>
<head>
	<title>frontend-101 B7</title>

	<meta name = "viewport" content = "width=device-width,initial-scale=1">
	<style>
		body,html{
			margin:0;
			height:100%;
		}
	
		.map-container{
			height:1000px;
			width:1600px;
			background: url('world.jpg') no-repeat;
			background-size: contain;
		}
	</style>
</head>
<body>
	<div class = "map-container">
	</div>

	<script>
		window.onbeforeunload = function(){window.scrollTo(0,0);}
		document.addEventListener("wheel", function(e){
			if(!e) e = window.event;
			e.preventDefault();

			var map = document.getElementsByClassName("map-container")[0];
			var mapHeight = map.getBoundingClientRect().height;
			var mapWidth = map.getBoundingClientRect().width;
			var aspectRatio = (mapWidth/mapHeight);

			if(mapHeight > window.innerHeight && mapWidth > window.innerWidth){
				map.style.height = (mapHeight-e.deltaY)+"px";
				map.style.width = (mapWidth-(e.deltaY)*aspectRatio)+"px";
			}

			else if(mapHeight < window.innerHeight || mapWidth < window.innerWidth){
				if(e.deltaY < 0){
					map.style.height = (mapHeight-e.deltaY)+"px";
					map.style.width = (mapWidth-(e.deltaY)*aspectRatio)+"px";
				}
			}

			//console.log();
			window.scrollBy((-(e.deltaY)*aspectRatio)*((e.clientX+window.scrollX)/mapWidth),-e.deltaY*((e.clientY+window.scrollY)/mapHeight));
		});

		var isMouseDown = 0;

		document.addEventListener("mousedown", function(){
			isMouseDown = 1;
			document.body.style.cursor = "pointer";
		});

		document.addEventListener("mouseup", function(){
			isMouseDown = 0;
			document.body.style.cursor = "default";
		});

		document.addEventListener("mousemove", function(e){
			if(!e) e = window.event;
			
			if(isMouseDown == 1){
				window.scrollBy(-e.movementX,-e.movementY);
			}
		});
	</script>
</body>
</html>